# API Сервиса Кошельков

Этот документ описывает API для сервиса кошельков.

## Настройка Маршрутов

Функция `WalletHandler.SetupRoutes()` настраивает следующие маршруты, используя роутер `chi`:

*   **Промежуточное ПО (Middleware):**
    *   `Logger`: Логирует HTTP запросы.
    *   `Recoverer`: Перехватывает паники и возвращает ошибку 500.
    *   `AllowContentType("application/json")`: Убеждается, что обрабатываются только запросы с заголовком `Content-Type: application/json`.
    *   `RateLimit`: Применяет ограничение скорости (rate limiting) к API. (Детали реализации не показаны здесь - предполагается, что это пользовательское middleware).

## Эндпоинты

Все эндпоинты имеют префикс `/api/v1`.

### 1. Создание Кошелька

*   **Метод:** `POST`
*   **Эндпоинт:** `/api/v1/wallet/create`
*   **Описание:** Создает новый кошелек.
*   **Тело Запроса:** Отсутствует (пустое тело)
*   **Ответ:** (Пример - зависит от реализации, добавьте пример успешного ответа)

    ```json
    {
      "wallet_id": "3b3ae179-6a00-4b20-9e0f-6809101685cd",
      "message": "Кошелек успешно создан"
    }
    ```

**Важно:** Вам необходимо создать кошелек перед выполнением каких-либо других операций.

### 2. Обработка Операции (Пополнение/Снятие)

*   **Метод:** `POST`
*   **Эндпоинт:** `/api/v1/wallet`
*   **Описание:** Выполняет операцию пополнения или снятия средств с кошелька.
*   **Тело Запроса:**

    ```json
    {
      "walletId": "3b3ae179-6a00-4b20-9e0f-6809101685cd",
      "operationType": "WITHDRAW",
      "amount": 100
    }
    ```

    *   `walletId`: UUID кошелька.
    *   `operationType`: Тип операции для выполнения. Допустимые значения: `WITHDRAW` (снятие), `DEPOSIT` (пополнение).
    *   `amount`: Сумма для пополнения или снятия.

*   **Ответ (Ошибка):**

    ```json
    {
      "error": "недостаточно средств"
    }
    ```

    *   Это пример ответа об ошибке. Возможны и другие ошибки (например, неверный UUID кошелька, неверный тип операции и т.д.). Добавьте больше деталей о возможных ошибках.

*   **Ответ (Успех):** (Пример - зависит от реализации, добавьте пример успешного ответа)

    ```json
    {
      "wallet_id": "3b3ae179-6a00-4b20-9e0f-6809101685cd",
      "new_balance": 900,
      "message": "Снятие средств успешно"
    }
    ```

### 3. Получение Баланса

*   **Метод:** `GET`
*   **Эндпоинт:** `/api/v1/wallets/{WALLET_UUID}`
*   **Описание:** Возвращает баланс кошелька.
*   **Параметр Пути:**
    *   `WALLET_UUID`: UUID кошелька. Замените `{WALLET_UUID}` на фактический ID кошелька в запросе.
*   **Ответ:**

    ```json
    {
      "wallet_id": "3b3ae179-6a00-4b20-9e0f-6809101685cd",
      "balance": 0
    }
    ```

## Пример Использования (cURL)

**Создание Кошелька:**

```bash
curl -X POST http://localhost:8080/api/v1/wallet/create
